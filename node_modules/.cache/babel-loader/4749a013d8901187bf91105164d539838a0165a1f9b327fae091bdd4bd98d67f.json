{"ast":null,"code":"import { invariant } from 'hey-listen';\nvar prevTime = 0;\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined ? function (callback) {\n  return window.requestAnimationFrame(callback);\n} : function (callback) {\n  var timestamp = Date.now();\n  var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\n  prevTime = timestamp + timeToCall;\n  setTimeout(function () {\n    return callback(prevTime);\n  }, timeToCall);\n};\nvar createStep = function (setRunNextFrame) {\n  var processToRun = [];\n  var processToRunNextFrame = [];\n  var numThisFrame = 0;\n  var isProcessing = false;\n  var i = 0;\n  var cancelled = new WeakSet();\n  var toKeepAlive = new WeakSet();\n  var renderStep = {\n    cancel: function (process) {\n      var indexOfCallback = processToRunNextFrame.indexOf(process);\n      cancelled.add(process);\n      if (indexOfCallback !== -1) {\n        processToRunNextFrame.splice(indexOfCallback, 1);\n      }\n    },\n    process: function (frame) {\n      var _a;\n      isProcessing = true;\n      _a = [processToRunNextFrame, processToRun], processToRun = _a[0], processToRunNextFrame = _a[1];\n      processToRunNextFrame.length = 0;\n      numThisFrame = processToRun.length;\n      if (numThisFrame) {\n        var process_1;\n        for (i = 0; i < numThisFrame; i++) {\n          process_1 = processToRun[i];\n          process_1(frame);\n          if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\n            renderStep.schedule(process_1);\n            setRunNextFrame(true);\n          }\n        }\n      }\n      isProcessing = false;\n    },\n    schedule: function (process, keepAlive, immediate) {\n      if (keepAlive === void 0) {\n        keepAlive = false;\n      }\n      if (immediate === void 0) {\n        immediate = false;\n      }\n      invariant(typeof process === 'function', 'Argument must be a function');\n      var addToCurrentBuffer = immediate && isProcessing;\n      var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\n      cancelled.delete(process);\n      if (keepAlive) toKeepAlive.add(process);\n      if (buffer.indexOf(process) === -1) {\n        buffer.push(process);\n        if (addToCurrentBuffer) numThisFrame = processToRun.length;\n      }\n    }\n  };\n  return renderStep;\n};\nvar StepId;\n(function (StepId) {\n  StepId[\"Read\"] = \"read\";\n  StepId[\"Update\"] = \"update\";\n  StepId[\"Render\"] = \"render\";\n  StepId[\"PostRender\"] = \"postRender\";\n  StepId[\"FixedUpdate\"] = \"fixedUpdate\";\n})(StepId || (StepId = {}));\nvar maxElapsed = 40;\nvar defaultElapsed = 1 / 60 * 1000;\nvar useDefaultElapsed = true;\nvar willRunNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [StepId.Read, StepId.Update, StepId.Render, StepId.PostRender];\nvar setWillRunNextFrame = function (willRun) {\n  return willRunNextFrame = willRun;\n};\nvar _a = stepsOrder.reduce(function (acc, key) {\n    var step = createStep(setWillRunNextFrame);\n    acc.sync[key] = function (process, keepAlive, immediate) {\n      if (keepAlive === void 0) {\n        keepAlive = false;\n      }\n      if (immediate === void 0) {\n        immediate = false;\n      }\n      if (!willRunNextFrame) startLoop();\n      step.schedule(process, keepAlive, immediate);\n      return process;\n    };\n    acc.cancelSync[key] = function (process) {\n      return step.cancel(process);\n    };\n    acc.steps[key] = step;\n    return acc;\n  }, {\n    steps: {},\n    sync: {},\n    cancelSync: {}\n  }),\n  steps = _a.steps,\n  sync = _a.sync,\n  cancelSync = _a.cancelSync;\nvar processStep = function (stepId) {\n  return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n  willRunNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultElapsed : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  if (!useDefaultElapsed) defaultElapsed = frame.delta;\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n  if (willRunNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\nvar startLoop = function () {\n  willRunNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n  return frame;\n};\nexport default sync;\nexport { cancelSync, getFrameData };","map":{"version":3,"names":["invariant","prevTime","onNextFrame","window","requestAnimationFrame","undefined","callback","timestamp","Date","now","timeToCall","Math","max","setTimeout","createStep","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","isProcessing","i","cancelled","WeakSet","toKeepAlive","renderStep","cancel","process","indexOfCallback","indexOf","add","splice","frame","_a","length","process_1","has","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","delete","push","StepId","maxElapsed","defaultElapsed","useDefaultElapsed","willRunNextFrame","delta","stepsOrder","Read","Update","Render","PostRender","setWillRunNextFrame","willRun","reduce","acc","key","step","sync","startLoop","cancelSync","steps","processStep","stepId","processFrame","min","forEach","getFrameData"],"sources":["/Users/heetaekwoo/Documents/Github/WebSite-MmBook/node_modules/framesync/dist/framesync.es.js"],"sourcesContent":["import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            if (keepAlive === void 0) { keepAlive = false; }\r\n            if (immediate === void 0) { immediate = false; }\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            cancelled.delete(process);\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar isProcessing = false;\r\nvar frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar _a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = _a.steps, sync = _a.sync, cancelSync = _a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = frame.delta;\r\n    frame.timestamp = timestamp;\r\n    isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return frame; };\n\nexport default sync;\nexport { cancelSync, getFrameData };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}