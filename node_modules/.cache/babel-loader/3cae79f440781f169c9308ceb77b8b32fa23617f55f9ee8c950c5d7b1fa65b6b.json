{"ast":null,"code":"import*as React from\"react\";import{memo,useRef}from\"react\";import{motion,useMotionValue}from\"framer-motion\";import{Link}from\"react-router-dom\";import{useInvertedBorderRadius}from\"../utils/use-inverted-border-radius\";import{ContentPlaceholder}from\"./ContentPlaceholder\";import{Title}from\"./Title\";import{Image}from\"./Image\";import{openSpring,closeSpring}from\"./animations\";import{useScrollConstraints}from\"../utils/use-scroll-constraints\";import{useWheelScroll}from\"../utils/use-wheel-scroll\";// Distance in pixels a user has to scroll a card down before we recognise\n// a swipe-to dismiss action.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const dismissDistance=150;export const Card=/*#__PURE__*/memo(_ref=>{let{isSelected,id,title,category,history,pointOfInterest,backgroundColor,article}=_ref;const y=useMotionValue(0);const zIndex=useMotionValue(isSelected?2:0);// Maintain the visual border radius when we perform the layoutTransition by inverting its scaleX/Y\nconst inverted=useInvertedBorderRadius(0);// We'll use the opened card element to calculate the scroll constraints\nconst cardRef=useRef(null);const constraints=useScrollConstraints(cardRef,isSelected);function checkSwipeToDismiss(){y.get()>dismissDistance&&history.push(\"/\");}function checkZIndex(latest){if(isSelected){zIndex.set(2);}else if(!isSelected&&latest.scaleX<1.01){zIndex.set(0);}}// When this card is selected, attach a wheel event listener\nconst containerRef=useRef(null);useWheelScroll(containerRef,y,constraints,checkSwipeToDismiss,isSelected);return/*#__PURE__*/_jsxs(\"li\",{ref:containerRef,className:`card`,children:[/*#__PURE__*/_jsx(Overlay,{isSelected:isSelected}),/*#__PURE__*/_jsxs(\"div\",{className:`card-content-container ${isSelected&&\"open\"}`,children:[/*#__PURE__*/_jsx(motion.img,{className:\"close\",src:`${process.env.PUBLIC_URL}/images/btn_close.svg`}),/*#__PURE__*/_jsxs(motion.div,{ref:cardRef,className:\"card-content\",style:Object.assign(Object.assign({},inverted),{zIndex,y}),layoutTransition:isSelected?openSpring:closeSpring,drag:isSelected?\"y\":false,dragConstraints:constraints,onDrag:checkSwipeToDismiss,onUpdate:checkZIndex,children:[/*#__PURE__*/_jsx(Image,{id:id,isSelected:isSelected,pointOfInterest:pointOfInterest,backgroundColor:backgroundColor}),/*#__PURE__*/_jsx(Title,{title:title,category:category,isSelected:isSelected}),/*#__PURE__*/_jsx(ContentPlaceholder,{article:article})]})]}),!isSelected&&/*#__PURE__*/_jsx(Link,{to:id,className:`card-open-link`})]});},(prev,next)=>prev.isSelected===next.isSelected);const Overlay=_ref2=>{let{isSelected}=_ref2;return/*#__PURE__*/_jsx(motion.div,{initial:false,animate:{opacity:isSelected?1:0},transition:{duration:0.2},style:{pointerEvents:isSelected?\"auto\":\"none\"},className:\"overlay\",children:/*#__PURE__*/_jsx(Link,{to:\"/\"})});};","map":{"version":3,"names":["React","memo","useRef","motion","useMotionValue","Link","useInvertedBorderRadius","ContentPlaceholder","Title","Image","openSpring","closeSpring","useScrollConstraints","useWheelScroll","jsx","_jsx","jsxs","_jsxs","dismissDistance","Card","_ref","isSelected","id","title","category","history","pointOfInterest","backgroundColor","article","y","zIndex","inverted","cardRef","constraints","checkSwipeToDismiss","get","push","checkZIndex","latest","set","scaleX","containerRef","ref","className","children","Overlay","img","src","process","env","PUBLIC_URL","div","style","Object","assign","layoutTransition","drag","dragConstraints","onDrag","onUpdate","to","prev","next","_ref2","initial","animate","opacity","transition","duration","pointerEvents"],"sources":["/Users/heetaekwoo/Documents/Github/WebSite-MmBook/src/Card/index.jsx"],"sourcesContent":["import * as React from \"react\";\nimport { memo, useRef } from \"react\";\nimport { motion, useMotionValue } from \"framer-motion\";\nimport { Link } from \"react-router-dom\";\nimport { useInvertedBorderRadius } from \"../utils/use-inverted-border-radius\";\nimport { ContentPlaceholder } from \"./ContentPlaceholder\";\nimport { Title } from \"./Title\";\nimport { Image } from \"./Image\";\nimport { openSpring, closeSpring } from \"./animations\";\nimport { useScrollConstraints } from \"../utils/use-scroll-constraints\";\nimport { useWheelScroll } from \"../utils/use-wheel-scroll\";\n// Distance in pixels a user has to scroll a card down before we recognise\n// a swipe-to dismiss action.\nconst dismissDistance = 150;\nexport const Card = memo(\n  ({\n    isSelected,\n    id,\n    title,\n    category,\n    history,\n    pointOfInterest,\n    backgroundColor,\n    article\n  }) => {\n    const y = useMotionValue(0);\n    const zIndex = useMotionValue(isSelected ? 2 : 0);\n    // Maintain the visual border radius when we perform the layoutTransition by inverting its scaleX/Y\n    const inverted = useInvertedBorderRadius(0);\n    // We'll use the opened card element to calculate the scroll constraints\n    const cardRef = useRef(null);\n    const constraints = useScrollConstraints(cardRef, isSelected);\n    function checkSwipeToDismiss() {\n      y.get() > dismissDistance && history.push(\"/\");\n    }\n    function checkZIndex(latest) {\n      if (isSelected) {\n        zIndex.set(2);\n      } else if (!isSelected && latest.scaleX < 1.01) {\n        zIndex.set(0);\n      }\n    }\n    // When this card is selected, attach a wheel event listener\n    const containerRef = useRef(null);\n    useWheelScroll(\n      containerRef,\n      y,\n      constraints,\n      checkSwipeToDismiss,\n      isSelected\n    );\n    return (\n      <li ref={containerRef} className={`card`}>\n        <Overlay isSelected={isSelected} />\n        <div className={`card-content-container ${isSelected && \"open\"}`}>\n          <motion.img className=\"close\" src={`${process.env.PUBLIC_URL}/images/btn_close.svg`} />\n          <motion.div\n            ref={cardRef}\n            className=\"card-content\"\n            style={Object.assign(Object.assign({}, inverted), { zIndex, y })}\n            layoutTransition={isSelected ? openSpring : closeSpring}\n            drag={isSelected ? \"y\" : false}\n            dragConstraints={constraints}\n            onDrag={checkSwipeToDismiss}\n            onUpdate={checkZIndex}\n          >\n            <Image\n              id={id}\n              isSelected={isSelected}\n              pointOfInterest={pointOfInterest}\n              backgroundColor={backgroundColor}\n            />\n\n            <Title title={title} category={category} isSelected={isSelected} />\n            <ContentPlaceholder article={article} />\n          </motion.div>\n        </div>\n        {!isSelected && <Link to={id} className={`card-open-link`} />}\n      </li>\n    );\n  },\n  (prev, next) => prev.isSelected === next.isSelected\n);\nconst Overlay = ({ isSelected }) => (\n  <motion.div\n    initial={false}\n    animate={{ opacity: isSelected ? 1 : 0 }}\n    transition={{ duration: 0.2 }}\n    style={{ pointerEvents: isSelected ? \"auto\" : \"none\" }}\n    className=\"overlay\"\n  >\n    <Link to=\"/\" />\n  </motion.div>\n);\n"],"mappings":"AAAA,MAAO,GAAK,CAAAA,KAAK,KAAM,OAAO,CAC9B,OAASC,IAAI,CAAEC,MAAM,KAAQ,OAAO,CACpC,OAASC,MAAM,CAAEC,cAAc,KAAQ,eAAe,CACtD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,uBAAuB,KAAQ,qCAAqC,CAC7E,OAASC,kBAAkB,KAAQ,sBAAsB,CACzD,OAASC,KAAK,KAAQ,SAAS,CAC/B,OAASC,KAAK,KAAQ,SAAS,CAC/B,OAASC,UAAU,CAAEC,WAAW,KAAQ,cAAc,CACtD,OAASC,oBAAoB,KAAQ,iCAAiC,CACtE,OAASC,cAAc,KAAQ,2BAA2B,CAC1D;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,eAAe,CAAG,GAAG,CAC3B,MAAO,MAAM,CAAAC,IAAI,cAAGlB,IAAI,CACtBmB,IAAA,EASM,IATL,CACCC,UAAU,CACVC,EAAE,CACFC,KAAK,CACLC,QAAQ,CACRC,OAAO,CACPC,eAAe,CACfC,eAAe,CACfC,OACF,CAAC,CAAAR,IAAA,CACC,KAAM,CAAAS,CAAC,CAAGzB,cAAc,CAAC,CAAC,CAAC,CAC3B,KAAM,CAAA0B,MAAM,CAAG1B,cAAc,CAACiB,UAAU,CAAG,CAAC,CAAG,CAAC,CAAC,CACjD;AACA,KAAM,CAAAU,QAAQ,CAAGzB,uBAAuB,CAAC,CAAC,CAAC,CAC3C;AACA,KAAM,CAAA0B,OAAO,CAAG9B,MAAM,CAAC,IAAI,CAAC,CAC5B,KAAM,CAAA+B,WAAW,CAAGrB,oBAAoB,CAACoB,OAAO,CAAEX,UAAU,CAAC,CAC7D,QAAS,CAAAa,mBAAmBA,CAAA,CAAG,CAC7BL,CAAC,CAACM,GAAG,CAAC,CAAC,CAAGjB,eAAe,EAAIO,OAAO,CAACW,IAAI,CAAC,GAAG,CAAC,CAChD,CACA,QAAS,CAAAC,WAAWA,CAACC,MAAM,CAAE,CAC3B,GAAIjB,UAAU,CAAE,CACdS,MAAM,CAACS,GAAG,CAAC,CAAC,CAAC,CACf,CAAC,IAAM,IAAI,CAAClB,UAAU,EAAIiB,MAAM,CAACE,MAAM,CAAG,IAAI,CAAE,CAC9CV,MAAM,CAACS,GAAG,CAAC,CAAC,CAAC,CACf,CACF,CACA;AACA,KAAM,CAAAE,YAAY,CAAGvC,MAAM,CAAC,IAAI,CAAC,CACjCW,cAAc,CACZ4B,YAAY,CACZZ,CAAC,CACDI,WAAW,CACXC,mBAAmB,CACnBb,UACF,CAAC,CACD,mBACEJ,KAAA,OAAIyB,GAAG,CAAED,YAAa,CAACE,SAAS,CAAE,MAAO,CAAAC,QAAA,eACvC7B,IAAA,CAAC8B,OAAO,EAACxB,UAAU,CAAEA,UAAW,CAAE,CAAC,cACnCJ,KAAA,QAAK0B,SAAS,CAAE,0BAA0BtB,UAAU,EAAI,MAAM,EAAG,CAAAuB,QAAA,eAC/D7B,IAAA,CAACZ,MAAM,CAAC2C,GAAG,EAACH,SAAS,CAAC,OAAO,CAACI,GAAG,CAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU,uBAAwB,CAAE,CAAC,cACvFjC,KAAA,CAACd,MAAM,CAACgD,GAAG,EACTT,GAAG,CAAEV,OAAQ,CACbW,SAAS,CAAC,cAAc,CACxBS,KAAK,CAAEC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAEvB,QAAQ,CAAC,CAAE,CAAED,MAAM,CAAED,CAAE,CAAC,CAAE,CACjE0B,gBAAgB,CAAElC,UAAU,CAAGX,UAAU,CAAGC,WAAY,CACxD6C,IAAI,CAAEnC,UAAU,CAAG,GAAG,CAAG,KAAM,CAC/BoC,eAAe,CAAExB,WAAY,CAC7ByB,MAAM,CAAExB,mBAAoB,CAC5ByB,QAAQ,CAAEtB,WAAY,CAAAO,QAAA,eAEtB7B,IAAA,CAACN,KAAK,EACJa,EAAE,CAAEA,EAAG,CACPD,UAAU,CAAEA,UAAW,CACvBK,eAAe,CAAEA,eAAgB,CACjCC,eAAe,CAAEA,eAAgB,CAClC,CAAC,cAEFZ,IAAA,CAACP,KAAK,EAACe,KAAK,CAAEA,KAAM,CAACC,QAAQ,CAAEA,QAAS,CAACH,UAAU,CAAEA,UAAW,CAAE,CAAC,cACnEN,IAAA,CAACR,kBAAkB,EAACqB,OAAO,CAAEA,OAAQ,CAAE,CAAC,EAC9B,CAAC,EACV,CAAC,CACL,CAACP,UAAU,eAAIN,IAAA,CAACV,IAAI,EAACuD,EAAE,CAAEtC,EAAG,CAACqB,SAAS,CAAE,gBAAiB,CAAE,CAAC,EAC3D,CAAC,CAET,CAAC,CACD,CAACkB,IAAI,CAAEC,IAAI,GAAKD,IAAI,CAACxC,UAAU,GAAKyC,IAAI,CAACzC,UAC3C,CAAC,CACD,KAAM,CAAAwB,OAAO,CAAGkB,KAAA,MAAC,CAAE1C,UAAW,CAAC,CAAA0C,KAAA,oBAC7BhD,IAAA,CAACZ,MAAM,CAACgD,GAAG,EACTa,OAAO,CAAE,KAAM,CACfC,OAAO,CAAE,CAAEC,OAAO,CAAE7C,UAAU,CAAG,CAAC,CAAG,CAAE,CAAE,CACzC8C,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAC9BhB,KAAK,CAAE,CAAEiB,aAAa,CAAEhD,UAAU,CAAG,MAAM,CAAG,MAAO,CAAE,CACvDsB,SAAS,CAAC,SAAS,CAAAC,QAAA,cAEnB7B,IAAA,CAACV,IAAI,EAACuD,EAAE,CAAC,GAAG,CAAE,CAAC,CACL,CAAC,EACd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}