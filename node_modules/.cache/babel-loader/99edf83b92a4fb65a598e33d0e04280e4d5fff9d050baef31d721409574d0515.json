{"ast":null,"code":"import { __rest, __assign, __extends } from 'tslib';\nimport { pipe, velocityPerSecond, mixComplex, mixColor, mix, clamp, progress, velocityPerFrame, distance, angle, applyOffset } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { color, complex, px, percent, degrees, vh, vw, number } from 'style-value-types';\nimport { createReversedEasing, linear, easeOut, easeInOut } from '@popmotion/easing';\nimport { invariant } from 'hey-listen';\nvar Observer = /*#__PURE__*/function () {\n  function Observer(_a, observer) {\n    var _this = this;\n    var middleware = _a.middleware,\n      onComplete = _a.onComplete;\n    this.isActive = true;\n    this.update = function (v) {\n      if (_this.observer.update) _this.updateObserver(v);\n    };\n    this.complete = function () {\n      if (_this.observer.complete && _this.isActive) _this.observer.complete();\n      if (_this.onComplete) _this.onComplete();\n      _this.isActive = false;\n    };\n    this.error = function (err) {\n      if (_this.observer.error && _this.isActive) _this.observer.error(err);\n      _this.isActive = false;\n    };\n    this.observer = observer;\n    this.updateObserver = function (v) {\n      return observer.update(v);\n    };\n    this.onComplete = onComplete;\n    if (observer.update && middleware && middleware.length) {\n      middleware.forEach(function (m) {\n        return _this.updateObserver = m(_this.updateObserver, _this.complete);\n      });\n    }\n  }\n  return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n  var middleware = _a.middleware;\n  if (typeof observerCandidate === 'function') {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, {\n      update: observerCandidate\n    });\n  } else {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, observerCandidate);\n  }\n};\nvar Action = /*#__PURE__*/function () {\n  function Action(props) {\n    if (props === void 0) {\n      props = {};\n    }\n    this.props = props;\n  }\n  Action.prototype.create = function (props) {\n    return new Action(props);\n  };\n  Action.prototype.start = function (observerCandidate) {\n    if (observerCandidate === void 0) {\n      observerCandidate = {};\n    }\n    var isComplete = false;\n    var subscription = {\n      stop: function () {\n        return undefined;\n      }\n    };\n    var _a = this.props,\n      init = _a.init,\n      observerProps = __rest(_a, [\"init\"]);\n    var observer = createObserver(observerCandidate, observerProps, function () {\n      isComplete = true;\n      subscription.stop();\n    });\n    var api = init(observer);\n    subscription = api ? __assign({}, subscription, api) : subscription;\n    if (isComplete) subscription.stop();\n    return subscription;\n  };\n  Action.prototype.applyMiddleware = function (middleware) {\n    return this.create(__assign({}, this.props, {\n      middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware]\n    }));\n  };\n  Action.prototype.pipe = function () {\n    var funcs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n  return Action;\n}();\nvar action = function (init) {\n  return new Action({\n    init: init\n  });\n};\nvar Chainable = /*#__PURE__*/function () {\n  function Chainable(props) {\n    if (props === void 0) {\n      props = {};\n    }\n    this.props = props;\n  }\n  Chainable.prototype.applyMiddleware = function (middleware) {\n    return this.create(__assign({}, this.props, {\n      middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware]\n    }));\n  };\n  Chainable.prototype.pipe = function () {\n    var funcs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n  Chainable.prototype.while = function (predicate) {\n    return this.applyMiddleware(function (update, complete) {\n      return function (v) {\n        return predicate(v) ? update(v) : complete();\n      };\n    });\n  };\n  Chainable.prototype.filter = function (predicate) {\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return predicate(v) && update(v);\n      };\n    });\n  };\n  return Chainable;\n}();\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n  __extends(BaseMulticast, _super);\n  function BaseMulticast() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.subscribers = [];\n    return _this;\n  }\n  BaseMulticast.prototype.complete = function () {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.complete();\n    });\n  };\n  BaseMulticast.prototype.error = function (err) {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.error(err);\n    });\n  };\n  BaseMulticast.prototype.update = function (v) {\n    for (var i = 0; i < this.subscribers.length; i++) {\n      this.subscribers[i].update(v);\n    }\n  };\n  BaseMulticast.prototype.subscribe = function (observerCandidate) {\n    var _this = this;\n    var observer = createObserver(observerCandidate, this.props);\n    this.subscribers.push(observer);\n    var subscription = {\n      unsubscribe: function () {\n        var index = _this.subscribers.indexOf(observer);\n        if (index !== -1) _this.subscribers.splice(index, 1);\n      }\n    };\n    return subscription;\n  };\n  BaseMulticast.prototype.stop = function () {\n    if (this.parent) this.parent.stop();\n  };\n  return BaseMulticast;\n}(Chainable);\nvar Multicast = /*#__PURE__*/function (_super) {\n  __extends(Multicast, _super);\n  function Multicast() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Multicast.prototype.create = function (props) {\n    return new Multicast(props);\n  };\n  return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n  return new Multicast();\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n  __extends(ValueReaction, _super);\n  function ValueReaction(props) {\n    var _this = _super.call(this, props) || this;\n    _this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n    _this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n      }\n    };\n    _this.prev = _this.current = props.value || 0;\n    _this.updateCurrent = function (v) {\n      return _this.current = v;\n    };\n    _this.getVelocityOfCurrent = function () {\n      return _this.getSingleVelocity(_this.current, _this.prev);\n    };\n    if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n    return _this;\n  }\n  ValueReaction.prototype.create = function (props) {\n    return new ValueReaction(props);\n  };\n  ValueReaction.prototype.get = function () {\n    return this.current;\n  };\n  ValueReaction.prototype.getVelocity = function () {\n    return this.getVelocityOfCurrent();\n  };\n  ValueReaction.prototype.update = function (v) {\n    _super.prototype.update.call(this, v);\n    this.prev = this.current;\n    this.updateCurrent(v);\n    var _a = getFrameData(),\n      delta = _a.delta,\n      timestamp = _a.timestamp;\n    this.timeDelta = delta;\n    this.lastUpdated = timestamp;\n    sync.postRender(this.scheduleVelocityCheck);\n  };\n  ValueReaction.prototype.subscribe = function (observerCandidate) {\n    var sub = _super.prototype.subscribe.call(this, observerCandidate);\n    this.subscribers[this.subscribers.length - 1].update(this.current);\n    return sub;\n  };\n  ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n    return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n  };\n  return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n  return new ValueReaction({\n    value: value,\n    initialSubscription: initialSubscription\n  });\n};\nvar createVectorTests = function (typeTests) {\n  var testNames = Object.keys(typeTests);\n  var isVectorProp = function (prop, key) {\n    return prop !== undefined && !typeTests[key](prop);\n  };\n  var getVectorKeys = function (props) {\n    return testNames.reduce(function (vectorKeys, key) {\n      if (isVectorProp(props[key], key)) vectorKeys.push(key);\n      return vectorKeys;\n    }, []);\n  };\n  var testVectorProps = function (props) {\n    return props && testNames.some(function (key) {\n      return isVectorProp(props[key], key);\n    });\n  };\n  return {\n    getVectorKeys: getVectorKeys,\n    testVectorProps: testVectorProps\n  };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n  return unitTypes.find(function (type) {\n    return type.test(prop);\n  });\n};\nvar isUnitProp = function (prop) {\n  return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n  return action(props);\n};\nvar createUnitAction = function (action, _a) {\n  var from = _a.from,\n    to = _a.to,\n    props = __rest(_a, [\"from\", \"to\"]);\n  var unitType = findUnitType(from) || findUnitType(to);\n  var transform = unitType.transform,\n    parse = unitType.parse;\n  return action(__assign({}, props, {\n    from: typeof from === 'string' ? parse(from) : from,\n    to: typeof to === 'string' ? parse(to) : to\n  })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n  return function (action, _a) {\n    var from = _a.from,\n      to = _a.to,\n      props = __rest(_a, [\"from\", \"to\"]);\n    return action(__assign({}, props, {\n      from: 0,\n      to: 1\n    })).pipe(mixer(from, to));\n  };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n  var _a = createVectorTests(typeTests),\n    testVectorProps = _a.testVectorProps,\n    getVectorKeys = _a.getVectorKeys;\n  var vectorAction = function (props) {\n    var isVector = testVectorProps(props);\n    if (!isVector) return action(props);\n    var vectorKeys = getVectorKeys(props);\n    var testKey = vectorKeys[0];\n    var testProp = props[testKey];\n    return getActionCreator(testProp)(action, props, vectorKeys);\n  };\n  return vectorAction;\n};\nvar getActionCreator = function (prop) {\n  if (typeof prop === 'number') {\n    return createAction;\n  } else if (isUnitProp(prop)) {\n    return createUnitAction;\n  } else if (color.test(prop)) {\n    return createColorAction;\n  } else if (complex.test(prop)) {\n    return createComplexAction;\n  } else {\n    return createAction;\n  }\n};\nvar decay = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n  return action(function (_a) {\n    var complete = _a.complete,\n      update = _a.update;\n    var _b = props.velocity,\n      velocity = _b === void 0 ? 0 : _b,\n      _c = props.from,\n      from = _c === void 0 ? 0 : _c,\n      _d = props.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = props.timeConstant,\n      timeConstant = _e === void 0 ? 350 : _e,\n      _f = props.restDelta,\n      restDelta = _f === void 0 ? 0.5 : _f,\n      modifyTarget = props.modifyTarget;\n    var elapsed = 0;\n    var amplitude = power * velocity;\n    var idealTarget = Math.round(from + amplitude);\n    var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n    var process = sync.update(function (_a) {\n      var frameDelta = _a.delta;\n      elapsed += frameDelta;\n      var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n      var isMoving = delta > restDelta || delta < -restDelta;\n      var current = isMoving ? target + delta : target;\n      update(current);\n      if (!isMoving) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n  from: number.test,\n  modifyTarget: function (func) {\n    return typeof func === 'function';\n  },\n  velocity: number.test\n});\nvar spring = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n  return action(function (_a) {\n    var update = _a.update,\n      complete = _a.complete;\n    var _b = props.velocity,\n      velocity = _b === void 0 ? 0.0 : _b;\n    var _c = props.from,\n      from = _c === void 0 ? 0.0 : _c,\n      _d = props.to,\n      to = _d === void 0 ? 0.0 : _d,\n      _e = props.stiffness,\n      stiffness = _e === void 0 ? 100 : _e,\n      _f = props.damping,\n      damping = _f === void 0 ? 10 : _f,\n      _g = props.mass,\n      mass = _g === void 0 ? 1.0 : _g,\n      _h = props.restSpeed,\n      restSpeed = _h === void 0 ? 0.01 : _h,\n      _j = props.restDelta,\n      restDelta = _j === void 0 ? 0.01 : _j;\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var t = 0;\n    var delta = to - from;\n    var position = from;\n    var prevPosition = position;\n    var process = sync.update(function (_a) {\n      var timeDelta = _a.delta;\n      t += timeDelta;\n      var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n      var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n      prevPosition = position;\n      if (dampingRatio < 1) {\n        var envelope = Math.exp(-dampingRatio * angularFreq * t);\n        var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n        position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n      } else {\n        var envelope = Math.exp(-angularFreq * t);\n        position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n      }\n      velocity = velocityPerSecond(position - prevPosition, timeDelta);\n      var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n      var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n      if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n        position = to;\n        update(position);\n        cancelSync.update(process);\n        complete();\n      } else {\n        update(position);\n      }\n    }, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n  from: number.test,\n  to: number.test,\n  stiffness: number.test,\n  damping: number.test,\n  mass: number.test,\n  velocity: number.test\n});\nvar inertia = function (_a) {\n  var _b = _a.from,\n    from = _b === void 0 ? 0 : _b,\n    _c = _a.velocity,\n    velocity = _c === void 0 ? 0 : _c,\n    min = _a.min,\n    max = _a.max,\n    _d = _a.power,\n    power = _d === void 0 ? 0.8 : _d,\n    _e = _a.timeConstant,\n    timeConstant = _e === void 0 ? 700 : _e,\n    _f = _a.bounceStiffness,\n    bounceStiffness = _f === void 0 ? 500 : _f,\n    _g = _a.bounceDamping,\n    bounceDamping = _g === void 0 ? 10 : _g,\n    _h = _a.restDelta,\n    restDelta = _h === void 0 ? 1 : _h,\n    modifyTarget = _a.modifyTarget;\n  return action(function (_a) {\n    var update = _a.update,\n      complete = _a.complete;\n    var prev = from;\n    var current = from;\n    var activeAnimation;\n    var isSpring = false;\n    var isLessThanMin = function (v) {\n      return min !== undefined && v <= min;\n    };\n    var isMoreThanMax = function (v) {\n      return max !== undefined && v >= max;\n    };\n    var isOutOfBounds = function (v) {\n      return isLessThanMin(v) || isMoreThanMax(v);\n    };\n    var isTravellingAwayFromBounds = function (v, currentVelocity) {\n      return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n    };\n    var onUpdate = function (v) {\n      update(v);\n      prev = current;\n      current = v;\n      velocity = velocityPerSecond(current - prev, getFrameData().delta);\n      if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, velocity)) {\n        startSpring({\n          from: v,\n          velocity: velocity\n        });\n      }\n    };\n    var startAnimation = function (animation, next) {\n      activeAnimation && activeAnimation.stop();\n      activeAnimation = animation.start({\n        update: onUpdate,\n        complete: function () {\n          if (next) {\n            next();\n            return;\n          }\n          complete();\n        }\n      });\n    };\n    var startSpring = function (props) {\n      isSpring = true;\n      startAnimation(vectorSpring(__assign({}, props, {\n        to: isLessThanMin(props.from) ? min : max,\n        stiffness: bounceStiffness,\n        damping: bounceDamping,\n        restDelta: restDelta\n      })));\n    };\n    if (isOutOfBounds(from)) {\n      startSpring({\n        from: from,\n        velocity: velocity\n      });\n    } else if (velocity !== 0) {\n      var animation = vectorDecay({\n        from: from,\n        velocity: velocity,\n        timeConstant: timeConstant,\n        power: power,\n        restDelta: isOutOfBounds(from) ? 20 : restDelta,\n        modifyTarget: modifyTarget\n      });\n      startAnimation(animation, function () {\n        if (isOutOfBounds(current)) {\n          startSpring({\n            from: current,\n            velocity: velocity\n          });\n        } else {\n          complete();\n        }\n      });\n    } else {\n      complete();\n    }\n    return {\n      stop: function () {\n        return activeAnimation && activeAnimation.stop();\n      }\n    };\n  });\n};\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n  from: number.test,\n  velocity: number.test,\n  min: number.test,\n  max: number.test,\n  damping: number.test,\n  stiffness: number.test,\n  modifyTarget: function (func) {\n    return typeof func === 'function';\n  }\n});\nvar frame = function () {\n  return action(function (_a) {\n    var update = _a.update;\n    var initialTime = 0;\n    var process = sync.update(function (_a) {\n      var timestamp = _a.timestamp;\n      if (!initialTime) initialTime = timestamp;\n      update(timestamp - initialTime);\n    }, true, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\nvar scrubber = function (_a) {\n  var _b = _a.from,\n    from = _b === void 0 ? 0 : _b,\n    _c = _a.to,\n    to = _c === void 0 ? 1 : _c,\n    _d = _a.ease,\n    ease = _d === void 0 ? linear : _d,\n    _e = _a.reverseEase,\n    reverseEase = _e === void 0 ? false : _e;\n  if (reverseEase) {\n    ease = createReversedEasing(ease);\n  }\n  return action(function (_a) {\n    var update = _a.update;\n    return {\n      seek: function (progress) {\n        return update(progress);\n      }\n    };\n  }).pipe(ease, function (v) {\n    return mix(from, to, v);\n  });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n  ease: function (func) {\n    return typeof func === 'function';\n  },\n  from: number.test,\n  to: number.test\n});\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n  return action(function (_a) {\n    var update = _a.update,\n      complete = _a.complete;\n    var _b = props.duration,\n      duration = _b === void 0 ? 300 : _b,\n      _c = props.ease,\n      ease = _c === void 0 ? easeOut : _c,\n      _d = props.flip,\n      flip = _d === void 0 ? 0 : _d,\n      _e = props.loop,\n      loop = _e === void 0 ? 0 : _e,\n      _f = props.yoyo,\n      yoyo = _f === void 0 ? 0 : _f,\n      _g = props.repeatDelay,\n      repeatDelay = _g === void 0 ? 0 : _g;\n    var _h = props.from,\n      from = _h === void 0 ? 0 : _h,\n      _j = props.to,\n      to = _j === void 0 ? 1 : _j,\n      _k = props.elapsed,\n      elapsed = _k === void 0 ? 0 : _k,\n      _l = props.flipCount,\n      flipCount = _l === void 0 ? 0 : _l,\n      _m = props.yoyoCount,\n      yoyoCount = _m === void 0 ? 0 : _m,\n      _o = props.loopCount,\n      loopCount = _o === void 0 ? 0 : _o;\n    var playhead = vectorScrubber({\n      from: from,\n      to: to,\n      ease: ease\n    }).start(update);\n    var currentProgress = 0;\n    var process;\n    var isActive = false;\n    var reverseAnimation = function (reverseEase) {\n      var _a;\n      if (reverseEase === void 0) {\n        reverseEase = false;\n      }\n      _a = [to, from], from = _a[0], to = _a[1];\n      playhead = vectorScrubber({\n        from: from,\n        to: to,\n        ease: ease,\n        reverseEase: reverseEase\n      }).start(update);\n    };\n    var isTweenComplete = function () {\n      var isComplete = isActive && elapsed > duration + repeatDelay;\n      if (!isComplete) return false;\n      if (isComplete && !loop && !flip && !yoyo) return true;\n      var overtime = elapsed - duration;\n      elapsed = overtime - repeatDelay;\n      if (loop && loopCount < loop) {\n        loopCount++;\n        return false;\n      } else if (flip && flipCount < flip) {\n        flipCount++;\n        reverseAnimation();\n        return false;\n      } else if (yoyo && yoyoCount < yoyo) {\n        yoyoCount++;\n        reverseAnimation(yoyoCount % 2 !== 0);\n        return false;\n      }\n      return true;\n    };\n    var updateTween = function () {\n      currentProgress = clampProgress(progress(0, duration, elapsed));\n      playhead.seek(currentProgress);\n    };\n    var startTimer = function () {\n      isActive = true;\n      process = sync.update(function (_a) {\n        var delta = _a.delta;\n        elapsed += delta;\n        updateTween();\n        if (isTweenComplete()) {\n          cancelSync.update(process);\n          complete && sync.update(complete, false, true);\n        }\n      }, true);\n    };\n    var stopTimer = function () {\n      isActive = false;\n      if (process) cancelSync.update(process);\n    };\n    startTimer();\n    return {\n      isActive: function () {\n        return isActive;\n      },\n      getElapsed: function () {\n        return clamp(0, duration, elapsed);\n      },\n      getProgress: function () {\n        return currentProgress;\n      },\n      stop: function () {\n        stopTimer();\n      },\n      pause: function () {\n        stopTimer();\n        return this;\n      },\n      resume: function () {\n        if (!isActive) startTimer();\n        return this;\n      },\n      seek: function (newProgress) {\n        elapsed = mix(0, duration, newProgress);\n        sync.update(updateTween, false, true);\n        return this;\n      },\n      reverse: function () {\n        reverseAnimation();\n        return this;\n      }\n    };\n  });\n};\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing) {\n  return values.map(function () {\n    return easing || easeOut;\n  }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n  var numValues = values.length;\n  return values.map(function (value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n  var rangeLength = input.length;\n  var finalInputIndex = rangeLength - 1;\n  var finalScrubberIndex = finalInputIndex - 1;\n  var subs = scrubbers.map(function (scrub) {\n    return scrub.start(update);\n  });\n  return function (v) {\n    if (v <= input[0]) {\n      subs[0].seek(0);\n    }\n    if (v >= input[finalInputIndex]) {\n      subs[finalScrubberIndex].seek(1);\n    }\n    var i = 1;\n    for (; i < rangeLength; i++) {\n      if (input[i] > v || i === finalInputIndex) break;\n    }\n    var progressInRange = progress(input[i - 1], input[i], v);\n    subs[i - 1].seek(clampProgress$1(progressInRange));\n  };\n};\nvar keyframes = function (_a) {\n  var easings = _a.easings,\n    _b = _a.ease,\n    ease = _b === void 0 ? linear : _b,\n    times = _a.times,\n    values = _a.values,\n    tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n  easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n  times = times || defaultTimings(values);\n  var scrubbers = easings.map(function (easing, i) {\n    return vectorScrubber({\n      from: values[i],\n      to: values[i + 1],\n      ease: easing\n    });\n  });\n  return tween(__assign({}, tweenProps, {\n    ease: ease\n  })).applyMiddleware(function (update) {\n    return interpolateScrubbers(times, scrubbers, update);\n  });\n};\nvar physics = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n  return action(function (_a) {\n    var complete = _a.complete,\n      update = _a.update;\n    var _b = props.acceleration,\n      acceleration = _b === void 0 ? 0 : _b,\n      _c = props.friction,\n      friction = _c === void 0 ? 0 : _c,\n      _d = props.velocity,\n      velocity = _d === void 0 ? 0 : _d,\n      springStrength = props.springStrength,\n      to = props.to;\n    var _e = props.restSpeed,\n      restSpeed = _e === void 0 ? 0.001 : _e,\n      _f = props.from,\n      from = _f === void 0 ? 0 : _f;\n    var current = from;\n    var process = sync.update(function (_a) {\n      var delta = _a.delta;\n      var elapsed = Math.max(delta, 16);\n      if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n      if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n      if (springStrength !== undefined && to !== undefined) {\n        var distanceToTarget = to - current;\n        velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n      }\n      current += velocityPerFrame(velocity, elapsed);\n      update(current);\n      var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n      if (isComplete) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      set: function (v) {\n        current = v;\n        return this;\n      },\n      setAcceleration: function (v) {\n        acceleration = v;\n        return this;\n      },\n      setFriction: function (v) {\n        friction = v;\n        return this;\n      },\n      setSpringStrength: function (v) {\n        springStrength = v;\n        return this;\n      },\n      setSpringTarget: function (v) {\n        to = v;\n        return this;\n      },\n      setVelocity: function (v) {\n        velocity = v;\n        return this;\n      },\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n  acceleration: number.test,\n  friction: number.test,\n  velocity: number.test,\n  from: number.test,\n  to: number.test,\n  springStrength: number.test\n});\nvar multi = function (_a) {\n  var getCount = _a.getCount,\n    getFirst = _a.getFirst,\n    getOutput = _a.getOutput,\n    mapApi = _a.mapApi,\n    setProp = _a.setProp,\n    startActions = _a.startActions;\n  return function (actions) {\n    return action(function (_a) {\n      var update = _a.update,\n        complete = _a.complete,\n        error = _a.error;\n      var numActions = getCount(actions);\n      var output = getOutput();\n      var updateOutput = function () {\n        return update(output);\n      };\n      var numCompletedActions = 0;\n      var subs = startActions(actions, function (a, name) {\n        var hasCompleted = false;\n        return a.start({\n          complete: function () {\n            if (!hasCompleted) {\n              hasCompleted = true;\n              numCompletedActions++;\n              if (numCompletedActions === numActions) sync.update(complete);\n            }\n          },\n          error: error,\n          update: function (v) {\n            setProp(output, name, v);\n            sync.update(updateOutput, false, true);\n          }\n        });\n      });\n      return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n        api[methodName] = mapApi(subs, methodName);\n        return api;\n      }, {});\n    });\n  };\n};\nvar composite = /*#__PURE__*/multi({\n  getOutput: function () {\n    return {};\n  },\n  getCount: function (subs) {\n    return Object.keys(subs).length;\n  },\n  getFirst: function (subs) {\n    return subs[Object.keys(subs)[0]];\n  },\n  mapApi: function (subs, methodName) {\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return Object.keys(subs).reduce(function (output, propKey) {\n        var _a;\n        if (subs[propKey][methodName]) {\n          args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n        }\n        return output;\n      }, {});\n    };\n  },\n  setProp: function (output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function (actions, starter) {\n    return Object.keys(actions).reduce(function (subs, key) {\n      subs[key] = starter(actions[key], key);\n      return subs;\n    }, {});\n  }\n});\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n  var flatInstructions = [];\n  var lastArg = instructions[instructions.length - 1];\n  var isStaggered = typeof lastArg === 'number';\n  var staggerDelay = isStaggered ? lastArg : 0;\n  var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n  var numSegments = segments.length;\n  var offset = 0;\n  segments.forEach(function (item, i) {\n    flatInstructions.push(item);\n    if (i !== numSegments - 1) {\n      var duration = item.duration || DEFAULT_DURATION;\n      offset += staggerDelay;\n      flatInstructions.push(\"-\" + (duration - offset));\n    }\n  });\n  return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n  Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n  return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n  var duration = props.duration,\n    easings = props.easings,\n    times = props.times,\n    values = props.values;\n  var numValues = values.length;\n  var prevTimeTo = times[numValues - 1];\n  var timeFrom = def.at === 0 ? 0 : def.at / duration;\n  var timeTo = (def.at + def.duration) / duration;\n  if (i === 0) {\n    values.push(def.from);\n    times.push(timeFrom);\n  } else {\n    if (prevTimeTo !== timeFrom) {\n      if (def.from !== undefined) {\n        values.push(values[numValues - 1]);\n        times.push(timeFrom);\n        easings.push(linear);\n      }\n      var from = def.from !== undefined ? def.from : values[numValues - 1];\n      values.push(from);\n      times.push(timeFrom);\n      easings.push(linear);\n    } else if (def.from !== undefined) {\n      values.push(def.from);\n      times.push(timeFrom);\n      easings.push(linear);\n    }\n  }\n  values.push(def.to);\n  times.push(timeTo);\n  easings.push(def.ease || easeInOut);\n  return props;\n};\nvar timeline = function (instructions, _a) {\n  var _b = _a === void 0 ? {} : _a,\n    duration = _b.duration,\n    elapsed = _b.elapsed,\n    ease = _b.ease,\n    loop = _b.loop,\n    flip = _b.flip,\n    yoyo = _b.yoyo;\n  var playhead = 0;\n  var calculatedDuration = 0;\n  var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n  var animationDefs = [];\n  flatInstructions.forEach(function (instruction) {\n    if (typeof instruction === 'string') {\n      playhead += parseFloat(instruction);\n    } else if (typeof instruction === 'number') {\n      playhead = instruction;\n    } else {\n      var def = __assign({}, instruction, {\n        at: playhead\n      });\n      def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n      animationDefs.push(def);\n      playhead += def.duration;\n      calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n    }\n  });\n  var tracks = {};\n  var numDefs = animationDefs.length;\n  for (var i = 0; i < numDefs; i++) {\n    var def = animationDefs[i];\n    var track = def.track;\n    if (track === undefined) {\n      throw new Error('No track defined');\n    }\n    if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n    tracks[track].push(def);\n  }\n  var trackKeyframes = {};\n  for (var key in tracks) {\n    if (tracks.hasOwnProperty(key)) {\n      var keyframeProps = tracks[key].reduce(convertDefToProps, {\n        duration: calculatedDuration,\n        easings: [],\n        times: [],\n        values: []\n      });\n      trackKeyframes[key] = keyframes(__assign({}, keyframeProps, {\n        duration: duration || calculatedDuration,\n        ease: ease,\n        elapsed: elapsed,\n        loop: loop,\n        yoyo: yoyo,\n        flip: flip\n      }));\n    }\n  }\n  return composite(trackKeyframes);\n};\nvar listen = function (element, events, options) {\n  return action(function (_a) {\n    var update = _a.update;\n    var eventNames = events.split(' ').map(function (eventName) {\n      element.addEventListener(eventName, update, options);\n      return eventName;\n    });\n    return {\n      stop: function () {\n        return eventNames.forEach(function (eventName) {\n          return element.removeEventListener(eventName, update, options);\n        });\n      }\n    };\n  });\n};\nvar defaultPointerPos = function () {\n  return {\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    x: 0,\n    y: 0\n  };\n};\nvar eventToPoint = function (e, point) {\n  if (point === void 0) {\n    point = defaultPointerPos();\n  }\n  point.clientX = point.x = e.clientX;\n  point.clientY = point.y = e.clientY;\n  point.pageX = e.pageX;\n  point.pageY = e.pageY;\n  return point;\n};\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n  var updatePointsLocation = function (_a) {\n    var touches = _a.touches;\n    isTouchDevice = true;\n    var numTouches = touches.length;\n    points.length = 0;\n    for (var i = 0; i < numTouches; i++) {\n      var thisTouch = touches[i];\n      points.push(eventToPoint(thisTouch));\n    }\n  };\n  listen(document, 'touchstart touchmove', {\n    passive: true,\n    capture: true\n  }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n  var _b = _a === void 0 ? {} : _a,\n    _c = _b.preventDefault,\n    preventDefault = _c === void 0 ? true : _c,\n    _d = _b.scale,\n    scale = _d === void 0 ? 1.0 : _d,\n    _e = _b.rotate,\n    rotate = _e === void 0 ? 0.0 : _e;\n  return action(function (_a) {\n    var update = _a.update;\n    var output = {\n      touches: points,\n      scale: scale,\n      rotate: rotate\n    };\n    var initialDistance = 0.0;\n    var initialRotation = 0.0;\n    var isGesture = points.length > 1;\n    if (isGesture) {\n      var firstTouch = points[0],\n        secondTouch = points[1];\n      initialDistance = distance(firstTouch, secondTouch);\n      initialRotation = angle(firstTouch, secondTouch);\n    }\n    var updatePoint = function () {\n      if (isGesture) {\n        var firstTouch = points[0],\n          secondTouch = points[1];\n        var newDistance = distance(firstTouch, secondTouch);\n        var newRotation = angle(firstTouch, secondTouch);\n        output.scale = scale * (newDistance / initialDistance);\n        output.rotate = rotate + (newRotation - initialRotation);\n      }\n      update(output);\n    };\n    var onMove = function (e) {\n      if (preventDefault || e.touches.length > 1) e.preventDefault();\n      sync.update(updatePoint);\n    };\n    var updateOnMove = listen(document, 'touchmove', {\n      passive: !preventDefault\n    }).start(onMove);\n    if (isTouchDevice) sync.update(updatePoint);\n    return {\n      stop: function () {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\nvar getIsTouchDevice = function () {\n  return isTouchDevice;\n};\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n  var updatePointLocation = function (e) {\n    isMouseDevice = true;\n    eventToPoint(e, point);\n  };\n  listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n  var _b = (_a === void 0 ? {} : _a).preventDefault,\n    preventDefault = _b === void 0 ? true : _b;\n  return action(function (_a) {\n    var update = _a.update;\n    var updatePoint = function () {\n      return update(point);\n    };\n    var onMove = function (e) {\n      if (preventDefault) e.preventDefault();\n      sync.update(updatePoint);\n    };\n    var updateOnMove = listen(document, 'mousemove').start(onMove);\n    if (isMouseDevice) sync.update(updatePoint);\n    return {\n      stop: function () {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\nvar getFirstTouch = function (_a) {\n  var firstTouch = _a[0];\n  return firstTouch;\n};\nvar pointer = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n  return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n    var touches = _a.touches;\n    return touches;\n  }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n  var x = _a.x,\n    y = _a.y,\n    props = __rest(_a, [\"x\", \"y\"]);\n  if (x !== undefined || y !== undefined) {\n    var applyXOffset_1 = applyOffset(x || 0);\n    var applyYOffset_1 = applyOffset(y || 0);\n    var delta_1 = {\n      x: 0,\n      y: 0\n    };\n    return pointer(props).pipe(function (point) {\n      delta_1.x = applyXOffset_1(point.x);\n      delta_1.y = applyYOffset_1(point.y);\n      return delta_1;\n    });\n  } else {\n    return pointer(props);\n  }\n};\nvar chain = function () {\n  var actions = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n  return action(function (_a) {\n    var update = _a.update,\n      complete = _a.complete;\n    var i = 0;\n    var current;\n    var playCurrent = function () {\n      current = actions[i].start({\n        complete: function () {\n          i++;\n          i >= actions.length ? complete() : playCurrent();\n        },\n        update: update\n      });\n    };\n    playCurrent();\n    return {\n      stop: function () {\n        return current && current.stop();\n      }\n    };\n  });\n};\nvar parallel = /*#__PURE__*/multi({\n  getOutput: function () {\n    return [];\n  },\n  getCount: function (subs) {\n    return subs.length;\n  },\n  getFirst: function (subs) {\n    return subs[0];\n  },\n  mapApi: function (subs, methodName) {\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return subs.map(function (sub, i) {\n        if (sub[methodName]) {\n          return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n        }\n      });\n    };\n  },\n  setProp: function (output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function (actions, starter) {\n    return actions.map(function (action, i) {\n      return starter(action, i);\n    });\n  }\n});\nvar parallel$1 = function () {\n  var actions = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n  return parallel(actions);\n};\nvar crossfade = function (a, b) {\n  return action(function (observer) {\n    var balance = 0;\n    var fadable = parallel$1(a, b).start(__assign({}, observer, {\n      update: function (_a) {\n        var va = _a[0],\n          vb = _a[1];\n        observer.update(mix(va, vb, balance));\n      }\n    }));\n    return {\n      setBalance: function (v) {\n        return balance = v;\n      },\n      stop: function () {\n        return fadable.stop();\n      }\n    };\n  });\n};\nvar delay = function (timeToDelay) {\n  return action(function (_a) {\n    var complete = _a.complete;\n    var timeout = setTimeout(complete, timeToDelay);\n    return {\n      stop: function () {\n        return clearTimeout(timeout);\n      }\n    };\n  });\n};\nvar merge = function () {\n  var actions = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n  return action(function (observer) {\n    var subs = actions.map(function (thisAction) {\n      return thisAction.start(observer);\n    });\n    return {\n      stop: function () {\n        return subs.forEach(function (sub) {\n          return sub.stop();\n        });\n      }\n    };\n  });\n};\nvar schedule = function (scheduler, schedulee) {\n  return action(function (_a) {\n    var update = _a.update,\n      complete = _a.complete;\n    var latest;\n    var schedulerSub = scheduler.start({\n      update: function () {\n        return latest !== undefined && update(latest);\n      },\n      complete: complete\n    });\n    var scheduleeSub = schedulee.start({\n      update: function (v) {\n        return latest = v;\n      },\n      complete: complete\n    });\n    return {\n      stop: function () {\n        schedulerSub.stop();\n        scheduleeSub.stop();\n      }\n    };\n  });\n};\nvar stagger = function (actions, interval) {\n  var intervalIsNumber = typeof interval === 'number';\n  var actionsWithDelay = actions.map(function (a, i) {\n    var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n    return chain(delay(timeToDelay), a);\n  });\n  return parallel$1.apply(void 0, actionsWithDelay);\n};\nvar styler = function () {\n  return invariant(false, 'styler has been removed from Popmotion in 9.0. Downgrade to 8.x or npm install stylefire');\n};\nexport { Action, ValueReaction, action, chain, composite, crossfade, vectorDecay as decay, delay, frame as everyFrame, index as inertia, keyframes, listen, merge, mouse, multicast, multitouch, parallel$1 as parallel, vectorPhysics as physics, index$1 as pointer, schedule, vectorSpring as spring, stagger, styler, timeline, tween, value };","map":{"version":3,"names":["__rest","__assign","__extends","pipe","velocityPerSecond","mixComplex","mixColor","mix","clamp","progress","velocityPerFrame","distance","angle","applyOffset","sync","getFrameData","cancelSync","color","complex","px","percent","degrees","vh","vw","number","createReversedEasing","linear","easeOut","easeInOut","invariant","Observer","_a","observer","_this","middleware","onComplete","isActive","update","v","updateObserver","complete","error","err","length","forEach","m","createObserver","observerCandidate","Action","props","prototype","create","start","isComplete","subscription","stop","undefined","init","observerProps","api","applyMiddleware","concat","funcs","_i","arguments","pipedUpdate","apply","action","Chainable","while","predicate","filter","BaseMulticast","_super","subscribers","subscriber","i","subscribe","push","unsubscribe","index","indexOf","splice","parent","Multicast","multicast","ValueReaction","call","scheduleVelocityCheck","postRender","velocityCheck","timestamp","lastUpdated","prev","current","value","updateCurrent","getVelocityOfCurrent","getSingleVelocity","initialSubscription","get","getVelocity","delta","timeDelta","sub","parseFloat","createVectorTests","typeTests","testNames","Object","keys","isVectorProp","prop","key","getVectorKeys","reduce","vectorKeys","testVectorProps","some","unitTypes","findUnitType","find","type","test","isUnitProp","Boolean","createAction","createUnitAction","from","to","unitType","transform","parse","createMixerAction","mixer","createColorAction","createComplexAction","createVectorAction","vectorAction","isVector","testKey","testProp","getActionCreator","decay","_b","velocity","_c","_d","power","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","Math","round","target","process","frameDelta","exp","isMoving","vectorDecay","func","spring","stiffness","damping","_g","mass","_h","restSpeed","_j","initialVelocity","t","position","prevPosition","dampingRatio","sqrt","angularFreq","envelope","expoDecay","sin","cos","isBelowVelocityThreshold","abs","isBelowDisplacementThreshold","vectorSpring","inertia","min","max","bounceStiffness","bounceDamping","activeAnimation","isSpring","isLessThanMin","isMoreThanMax","isOutOfBounds","isTravellingAwayFromBounds","currentVelocity","onUpdate","startSpring","startAnimation","animation","next","frame","initialTime","scrubber","ease","reverseEase","seek","vectorScrubber","clampProgress","tween","duration","flip","loop","yoyo","repeatDelay","_k","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","currentProgress","reverseAnimation","isTweenComplete","overtime","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","resume","newProgress","reverse","clampProgress$1","defaultEasings","values","easing","map","defaultTimings","numValues","interpolateScrubbers","input","scrubbers","rangeLength","finalInputIndex","finalScrubberIndex","subs","scrub","progressInRange","keyframes","easings","times","tweenProps","Array","isArray","physics","acceleration","friction","springStrength","pow","distanceToTarget","set","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","output","updateOutput","numCompletedActions","a","name","hasCompleted","methodName","composite","args","propKey","starter","DEFAULT_DURATION","flattenTimings","instructions","flatInstructions","lastArg","isStaggered","staggerDelay","segments","slice","numSegments","offset","item","flattenArrayInstructions","instruction","convertDefToProps","def","prevTimeTo","timeFrom","at","timeTo","timeline","calculatedDuration","animationDefs","tracks","numDefs","track","Error","hasOwnProperty","trackKeyframes","keyframeProps","listen","element","events","options","eventNames","split","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","x","y","eventToPoint","e","point","points","isTouchDevice","document","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","scale","rotate","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","index$1","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","parallel","parallel$1","crossfade","b","balance","fadable","va","vb","setBalance","delay","timeToDelay","timeout","setTimeout","clearTimeout","merge","thisAction","schedule","scheduler","schedulee","latest","schedulerSub","scheduleeSub","stagger","interval","intervalIsNumber","actionsWithDelay","styler","everyFrame"],"sources":["/Users/heetaekwoo/Documents/Github/WebSite-MmBook/node_modules/popmotion/dist/popmotion.es.js"],"sourcesContent":["import { __rest, __assign, __extends } from 'tslib';\nimport { pipe, velocityPerSecond, mixComplex, mixColor, mix, clamp, progress, velocityPerFrame, distance, angle, applyOffset } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { color, complex, px, percent, degrees, vh, vw, number } from 'style-value-types';\nimport { createReversedEasing, linear, easeOut, easeInOut } from '@popmotion/easing';\nimport { invariant } from 'hey-listen';\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var _this = this;\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function () {\n    function Action(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    Action.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Action.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    return Action;\n}();\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        _this.updateCurrent = function (v) {\n            return _this.current = v;\n        };\n        _this.getVelocityOfCurrent = function () {\n            return _this.getSingleVelocity(_this.current, _this.prev);\n        };\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var prev = from;\n        var current = from;\n        var activeAnimation;\n        var isSpring = false;\n        var isLessThanMin = function (v) {\n            return min !== undefined && v <= min;\n        };\n        var isMoreThanMax = function (v) {\n            return max !== undefined && v >= max;\n        };\n        var isOutOfBounds = function (v) {\n            return isLessThanMin(v) || isMoreThanMax(v);\n        };\n        var isTravellingAwayFromBounds = function (v, currentVelocity) {\n            return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n        };\n        var onUpdate = function (v) {\n            update(v);\n            prev = current;\n            current = v;\n            velocity = velocityPerSecond(current - prev, getFrameData().delta);\n            if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, velocity)) {\n                startSpring({ from: v, velocity: velocity });\n            }\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: onUpdate,\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            isSpring = true;\n            startAnimation(vectorSpring(__assign({}, props, { to: isLessThanMin(props.from) ? min : max, stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity });\n        } else if (velocity !== 0) {\n            var animation = vectorDecay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: isOutOfBounds(from) ? 20 : restDelta,\n                modifyTarget: modifyTarget\n            });\n            startAnimation(animation, function () {\n                if (isOutOfBounds(current)) {\n                    startSpring({ from: current, velocity: velocity });\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress) {\n                return update(progress);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            var _a;\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            var overtime = elapsed - duration;\n            elapsed = overtime - repeatDelay;\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing) {\n    return values.map(function () {\n        return easing || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar styler = function () {\n    return invariant(false, 'styler has been removed from Popmotion in 9.0. Downgrade to 8.x or npm install stylefire');\n};\n\nexport { Action, ValueReaction, action, chain, composite, crossfade, vectorDecay as decay, delay, frame as everyFrame, index as inertia, keyframes, listen, merge, mouse, multicast, multitouch, parallel$1 as parallel, vectorPhysics as physics, index$1 as pointer, schedule, vectorSpring as spring, stagger, styler, timeline, tween, value };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}